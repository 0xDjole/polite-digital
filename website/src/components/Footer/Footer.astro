---
import FooterLink from "@components/Footer/FooterLink.astro";
import SiteLogo from "@components/SiteLogo/SiteLogo.astro";

import { cmsApi, getBlockFromArray } from "@lib/index";
import { getLocale, getRelativeLocaleUrl } from "@lib/i18n";

const { getCollection, getBlockObjectValues } = cmsApi();
const websiteCollection = await getCollection("website");

const currLocale = getLocale(Astro.currentLocale);
const siteData = getBlockFromArray(websiteCollection, "info", currLocale);

const today = new Date();
---

<div class="border-secondary mt-20 border-t">
	<footer class="site-container m-auto w-full pb-6">
		<div class="flex w-full flex-col justify-between gap-4 sm:flex-row sm:gap-10">
			<div class="mt-6 flex flex-col items-start gap-2">
				<SiteLogo />
			</div>
			<div class="grid grid-cols-2 gap-4 md:grid-cols-3">
				<!-- Navigation -->
				<div class="flex flex-col">
					<h3 class="text-primary mt-6 mb-2 text-lg font-semibold">Navigation</h3>
					<FooterLink href={getRelativeLocaleUrl(Astro.currentLocale, "/blog")}>Blog</FooterLink>
					<FooterLink href={getRelativeLocaleUrl(Astro.currentLocale, "/overview")}
						>Overview</FooterLink
					>
					<FooterLink href={getRelativeLocaleUrl(Astro.currentLocale, "/about")}>About</FooterLink>
					<FooterLink href={getRelativeLocaleUrl(Astro.currentLocale, "/contact")}
						>Contact</FooterLink
					>
				</div>

				<!-- Legal -->
				<div class="flex flex-col">
					<h3 class="text-primary mt-6 mb-2 text-lg font-semibold">Legal</h3>
					<FooterLink href="https://cosmicthemes.com/license/" newTab={true}> License </FooterLink>
					<FooterLink href="https://cosmicthemes.com/refund/" newTab={true}>
						Refund policy
					</FooterLink>
					<FooterLink href="https://cosmicthemes.com/terms/" newTab={true}>
						Terms of use
					</FooterLink>
					<FooterLink href="https://cosmicthemes.com/privacy/" newTab={true}>
						Privacy policy
					</FooterLink>
					<FooterLink href="https://cosmicthemes.com/support/" newTab={true}> Support </FooterLink>
				</div>

				<!-- In the Know -->
				<div class="flex flex-col">
					<h3 class="text-primary mt-6 mb-2 text-lg font-semibold">In the Know</h3>
					<FooterLink href="https://twitter.com/BowTiedWebReapr" newTab={true}>
						@BowTiedWebReapr
					</FooterLink>
					<FooterLink href="https://twitter.com/Cosmic_Themes" newTab={true}>
						@Cosmic_Themes
					</FooterLink>
				</div>
			</div>
		</div>
		<hr class="border-secondary my-6" />
		<div class="text-muted text-sm">
			&copy; {today.getFullYear()}
			{" "}{siteData.name}. All rights reserved.
		</div>
		<div class="sr-only">
			<p>
				A website template crafted with love by <a href="https://cosmicthemes.com/">Cosmic Themes</a
				>
			</p>
		</div>
	</footer>
</div>
