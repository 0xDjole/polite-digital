---
import { getLocale } from "@lib/i18n";
import { cmsApi, getBlockFromArray, getBlockObjectValues } from "@lib/index";
import Button from "@components/Button/Button.astro";

const { getCollection, getImageUrl } = cmsApi();
const websiteCollection = await getCollection("website");
const currLocale = getLocale(Astro.currentLocale);
const info = getBlockFromArray(websiteCollection, "info", currLocale);
const aboutTitle = info.aboutTitle;
const aboutContent = info.aboutContent;
const aboutImage = info.aboutImage;
---

<section id="about" class="py-16 md:py-24">
	<div class="site-container">
		<div class="grid items-center gap-12 lg:grid-cols-2">
			<figure class="about-image gsap-slide-left order-2 lg:order-1">
				{
					aboutImage ? (
						<div class="relative">
							<div
								class="absolute inset-0 rounded-3xl blur-sm"
								style="background-color: rgba(0,0,0,0.3);"
							/>
							<img
								referrerpolicy="no-referrer"
								src={getImageUrl(aboutImage)}
								alt={aboutTitle}
								class="relative w-full rounded-3xl object-cover shadow-lg transition-transform duration-500 hover:scale-[1.02]"
								style="filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4));"
							/>
						</div>
					) : (
						<div class="bg-muted border-primary flex justify-center rounded-3xl border px-4 py-16 text-5xl shadow-lg">
							ðŸš€
						</div>
					)
				}
			</figure>
			<div class="about-content gsap-slide-right order-1 space-y-6 lg:order-2">
				<h2 class="main-text-gradient gsap-fade-up text-4xl font-bold md:text-5xl" data-delay="0.2">
					{aboutTitle}
				</h2>
				<div class="prose prose-lg text-secondary gsap-fade-up max-w-none" data-delay="0.4">
					{aboutContent}
				</div>
				<div class="gsap-stagger flex flex-wrap gap-4 pt-4">
					<Button variant="primary" class="hover-lift gsap-stagger-item px-6 py-3">
						Our Process
					</Button>
					<Button variant="outline" class="hover-lift gsap-stagger-item px-6 py-3">
						Contact Us
					</Button>
				</div>
			</div>
		</div>
	</div>
</section>
